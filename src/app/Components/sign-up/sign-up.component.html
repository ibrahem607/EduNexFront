<section class="container d-flex justify-content-center" dir="rtl">
  <div class="px-4 col-md-7">
    <div class="text-center mt-5 mb-4">
      <h3 class="text-second mb-4" style="color: orange; font-weight: 700;">انشئ حسابك الآن</h3>
      <h6 class="mb-6 text-main font-24-bold">ادخل بياناتك بشكل صحيح للحصول علي افضل تجربة داخل الموقع</h6>
    </div>

    <form class="form-floating" action="" method="" [formGroup]="signupForm" (ngSubmit)="onSubmit()">

      <div class="row">
        <div class="col">
          <mat-form-field appearance="outline" style="width: 100% !important;">
            <mat-label>الأسم </mat-label>
            <input matInput type="text" name="fullName" formControlName="fullName" id="fullName"
              placeholder="اسم الطالب" aria-label=" اسم الطالب">
            <mat-icon matSuffix class="fa-regular fa-user"></mat-icon>
            <mat-error *ngIf="fullName?.touched && fullName?.invalid">
              <span *ngIf="fullName?.errors?.['pattern']" class="text-danger">الأسم يجب أن يكون 8 حروف على الأقل ولا
                يحتوي على أرقام</span>
              <span *ngIf="fullName?.errors?.['required']" class="text-danger">الأسم مطلوب</span>
            </mat-error>
          </mat-form-field>
        </div>
        <div class="col">
          <mat-form-field appearance="outline" style="width: 100% !important;">
            <mat-label>اسم العائلة</mat-label>
            <input matInput type="text" name="lastName" formControlName="lastName" id="lastName"
              placeholder="اسم العائلة" aria-label=" اسم المعلم">
            <mat-icon matSuffix class="fa-regular fa-user"></mat-icon>
            <mat-error *ngIf="lastName?.touched && lastName?.invalid">
              <span *ngIf="lastName?.errors?.['required']" class="text-danger">الأسم مطلوب</span>
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <mat-form-field appearance="outline" style="width: 100%;">
            <mat-label>عنوان البريد الإلكتروني</mat-label>
            <input matInput type="email" name="studentEmail" formControlName="studentEmail" id="studentEmail"
              placeholder="البريد الإلكتروني" aria-label="عنوان البريد الإلكتروني" required>
            <mat-icon matSuffix class="fa-solid fa-envelope"></mat-icon>
            <mat-error *ngIf="studentEmail?.touched && studentEmail?.invalid">
              <span *ngIf="studentEmail?.errors?.['pattern']" class="text-danger">البريد الإلكتروني غير صالح</span>
              <span *ngIf="studentEmail?.errors?.['required']" class="text-danger">البريد الإلكتروني مطلوب</span>
            </mat-error>
          </mat-form-field>
        </div>

        <div class="col">
          <mat-form-field appearance="outline" style="width: 100%;">
            <mat-label>رقم تليفون الطالب</mat-label>
            <input matInput type="text" name="studentPhoneNumber" formControlName="studentPhoneNumber"
              id="studentPhoneNumber" placeholder="رقم الموبايل" aria-label="رقم تليفون الطالب">
            <mat-icon matSuffix class="fa-solid fa-mobile-screen-button"></mat-icon>
            <mat-error *ngIf="studentPhoneNumber?.touched && studentPhoneNumber?.invalid">
              <span *ngIf="studentPhoneNumber?.errors?.['pattern']" class="text-danger">رقم الهاتف يجب أن يكون من 11 رقم
                يبدأ بـ 010 أو 011 أو 012 أو 015</span>
              <span *ngIf="studentPhoneNumber?.errors?.['required']" class="text-danger">رقم الهاتف مطلوب</span>
            </mat-error>
          </mat-form-field>
        </div>

        <div class="col">
          <mat-form-field appearance="outline" style="width: 100%;">
            <mat-label>رقم تليفون ولي الأمر</mat-label>
            <input matInput type="text" name="fatherPhoneNumber" formControlName="fatherPhoneNumber"
              id="fatherPhoneNumber" placeholder="رقم الموبايل" aria-label="رقم تليفون ولي الأمر">
            <mat-icon matSuffix class="fa-solid fa-mobile-screen-button"></mat-icon>
            <mat-error *ngIf="fatherPhoneNumber?.touched && fatherPhoneNumber?.invalid">
              <span *ngIf="fatherPhoneNumber?.errors?.['pattern']" class="text-danger">رقم الهاتف يجب أن يكون من 11 رقم
                يبدأ بـ 010 أو 011 أو 012 أو 015</span>
              <span *ngIf="fatherPhoneNumber?.errors?.['required']" class="text-danger">رقم الهاتف مطلوب</span>
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <mat-form-field appearance="outline" style="width: 100%;">
            <mat-label>الديانة</mat-label>
            <mat-select formControlName="religion" placeholder="اختر الديانة" aria-label="الديانة" required>
              <mat-option disabled selected hidden>اختر الديانة</mat-option>
              <mat-option value="Islam">الإسلام</mat-option>
              <mat-option value="Christianity">المسيحية</mat-option>
            </mat-select>
            <mat-icon matSuffix class="fa-solid fa-star-and-crescent"></mat-icon>
            <mat-error *ngIf="religion?.touched && religion?.invalid">الديانة مطلوبة</mat-error>
          </mat-form-field>
        </div>

        <div class="col">
          <mat-form-field appearance="outline" style="width: 100%;">
            <mat-label>تاريخ الميلاد</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="birthday" placeholder="تاريخ الميلاد"
              aria-label="تاريخ الميلاد" required>
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
            <mat-error
              *ngIf="signupForm.get('birthday')?.touched && signupForm.get('birthday')?.errors?.['required']">تاريخ
              الميلاد مطلوب</mat-error>
          </mat-form-field>
        </div>
      </div>

      <div class="col">
        <mat-form-field appearance="outline" style="width: 100%;">
          <mat-label>الجنس</mat-label>
          <mat-select formControlName="sex" placeholder="اختر الجنس" aria-label="الجنس" required>
            <mat-option value="" disabled selected hidden>اختر الجنس</mat-option>
            <mat-option value="Male">ذكر</mat-option>
            <mat-option value="Female">أنثى</mat-option>
          </mat-select>
          <mat-icon matSuffix class="fa-solid fa-mars-and-venus"></mat-icon>
          <mat-error *ngIf="sex?.touched && sex?.invalid"> يجب تحديد الجنس</mat-error>
        </mat-form-field>
      </div>

      <mat-form-field appearance="outline" style="width: 100%;">
        <mat-label>المحافظة</mat-label>
        <mat-select formControlName="governorate" placeholder="اختر المحافظة" aria-label="المحافظة" required
          [ngClass]="{'is-invalid': isInputFocused}" id="Governorate" name="Governorate">
          <mat-option value="" disabled selected hidden>اختر المحافظة</mat-option>
          <mat-option value="cairo">القاهرة</mat-option>
          <!-- Add more governorate options here -->
        </mat-select>
        <mat-icon matSuffix class="fa-solid fa-location-dot"></mat-icon>
        <mat-error *ngIf="governorate?.touched && governorate?.invalid">يجب تحديد المحافظة</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" style="width: 100%;">
        <mat-label>المرحلة التعليمية</mat-label>
        <mat-select formControlName="education" placeholder="اختر المرحلة التعليمية" aria-label="المرحلة التعليمية"
          required id="education" name="education">
          <mat-option value="" disabled selected hidden>اختر المرحلة التعليمية</mat-option>
          <mat-option value="1">الصف الأول الثانوي</mat-option>
          <mat-option value="2">الصف الثاني الثانوي</mat-option>
          <mat-option value="3">الصف الثالث الثانوي</mat-option>
        </mat-select>
        <mat-icon matSuffix class="fa-solid fa-user-graduate"></mat-icon>
        <mat-error *ngIf="education?.touched && education?.invalid">يجب تحديد المرحلة التعليمية</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" style="width: 100%;">
        <mat-label>العنوان التفصيلي</mat-label>
        <input matInput name="address" formControlName="address" placeholder="العنوان التفصيلي"
          aria-label="العنوان التفصيلي" required>
        <mat-icon matSuffix class="fa-solid fa-map-location"></mat-icon>
        <mat-error *ngIf="address?.touched && address?.errors?.['required']">العنوان مطلوب</mat-error>
      </mat-form-field>

      <div class="row">
        <div class="col">
          <mat-form-field appearance="outline" style="width: 100%;">
            <mat-label>كلمة السر</mat-label>
            <input matInput type="password" name="password" formControlName="password" placeholder="كلمة السر"
              aria-label="كلمة السر" required>
            <mat-icon matSuffix class="fa-solid fa-lock"></mat-icon>
            <mat-error *ngIf="isPasswordInvalid()">
              <span *ngIf="password?.errors?.['required']" class="text-danger">كلمة المرور مطلوبة</span>
              <span *ngIf="password?.errors?.['minlength']" class="text-danger">كلمة المرور يجب أن تكون أكثر من 8
                أحرف</span>
              <span *ngIf="password?.errors?.['weakPassword']" class="text-danger">كلمة المرور ضعيفة. يجب أن تحتوي على
                حرف كبير وحرف صغير ورقم ورمز خاص.</span>
            </mat-error>
          </mat-form-field>
        </div>

        <div class="col">
          <mat-form-field appearance="outline" style="width: 100%;">
            <mat-label>تأكيد كلمة السر</mat-label>
            <input matInput type="password" name="confirmPassword" formControlName="confirmPassword"
              placeholder="تأكيد كلمة السر" aria-label="تأكيد كلمة السر" required>
            <mat-icon matSuffix class="fa-solid fa-lock"></mat-icon>
            <mat-error *ngIf="signupForm.get('confirmPassword')?.hasError('unMatchedPassword')">
              <span class="text-danger">كلمة المرور غير متطابقة</span>
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <div class="mt-3 mb-3">
        <input type="checkbox" id="rebot" formControlName="rebot"
          style="transform: scale(1.1); width: 5%; height: 20px;" required>
        <label for="rebot" class="me-1">أنا لست روبوت</label>
        <mat-error
          *ngIf="signupForm.get('rebot')?.touched && signupForm.get('rebot')?.errors?.['required']">مطلوب</mat-error>
      </div>

      <div class="mt-3 mb-3">
        <input type="checkbox" id="rebot2" formControlName="rebot2"
          style="transform: scale(1.1); width: 5%; height: 20px;" required>
        <label for="rebot2" class="me-1">أوافق على <a [routerLink]="['/login']">الشروط والأحكام</a></label>
        <mat-error
          *ngIf="signupForm.get('rebot2')?.touched && signupForm.get('rebot2')?.errors?.['required']">مطلوب</mat-error>
      </div>

      <div class="d-grid gap-3 text-center my-5">
        <button mat-button class="rounded-5 custom-button" type="submit">إنشاء حساب</button>
        <p>يوجد لديك حساب بالفعل؟ <a [routerLink]="['/login']" class="ms-1 text-second text-decoration-none"
            style="color: orange;">ادخل إلى حسابك الآن</a></p>
      </div>
    </form>
  </div>
</section>
